# ChatList

ChatList — это Python-приложение с графическим интерфейсом (PyQt5), которое позволяет отправлять один и тот же промт в несколько нейросетей одновременно и сравнивать их ответы в удобной таблице.

## Возможности

- ✅ Отправка промта в несколько нейросетей одновременно
- ✅ Сравнение ответов в табличном виде
- ✅ Сохранение промтов и результатов в базу данных SQLite
- ✅ Управление моделями (добавление, редактирование, удаление)
- ✅ Поиск по сохраненным промтам
- ✅ Экспорт результатов в Markdown и JSON
- ✅ Поддержка различных API: OpenAI, DeepSeek, Groq, OpenRouter

## Требования

- Python 3.11+
- SQLite 3
- PyQt5
- requests
- python-dotenv

## Установка

### 1. Клонирование репозитория

```powershell
git clone https://github.com/rbait31/ChatList.git
cd ChatList
```

### 2. Установка зависимостей

```powershell
pip install -r requirements.txt
```

### 3. Настройка переменных окружения

Создайте файл `.env` в корне проекта на основе `.env.example`:

```powershell
Copy-Item .env.example .env
```

Откройте `.env` и добавьте свои API-ключи:

```env
# OpenAI API Key
OPENAI_API_KEY=sk-your-openai-api-key-here

# DeepSeek API Key
DEEPSEEK_API_KEY=sk-your-deepseek-api-key-here

# Groq API Key
GROQ_API_KEY=gsk_your-groq-api-key-here

# OpenRouter API Key
OPENROUTER_API_KEY=sk-or-your-openrouter-api-key-here
```

**Важно:** Не коммитьте файл `.env` в репозиторий! Он уже добавлен в `.gitignore`.

## Запуск

```powershell
python main.py
```

## Использование

### Первоначальная настройка

1. **Добавление моделей:**
   - Перейдите в меню `Настройки` → `Управление моделями`
   - Нажмите "Добавить модель"
   - Заполните форму:
     - **Название модели:** например, "GPT-4" или "DeepSeek Chat"
     - **API URL:** URL эндпоинта API (например, `https://api.openai.com/v1/chat/completions`)
     - **Имя переменной окружения:** имя переменной из `.env` файла (например, `OPENAI_API_KEY`)
   - Установите флаг "Активна" для включения модели

2. **Примеры моделей:**

   **OpenAI:**
   - Название: `GPT-4`
   - API URL: `https://api.openai.com/v1/chat/completions`
   - API Key Env: `OPENAI_API_KEY`

   **DeepSeek:**
   - Название: `DeepSeek Chat`
   - API URL: `https://api.deepseek.com/v1/chat/completions`
   - API Key Env: `DEEPSEEK_API_KEY`

   **Groq:**
   - Название: `Mixtral 8x7b`
   - API URL: `https://api.groq.com/openai/v1/chat/completions`
   - API Key Env: `GROQ_API_KEY`

   **OpenRouter:**
   - Название: `GPT-4 via OpenRouter`
   - API URL: `https://openrouter.ai/api/v1/chat/completions`
   - API Key Env: `OPENROUTER_API_KEY`

### Работа с промтами

1. **Ввод нового промта:**
   - Введите текст промта в верхнее текстовое поле
   - (Опционально) Добавьте теги через запятую
   - Нажмите "Отправить запрос"

2. **Использование сохраненного промта:**
   - Используйте поле "Поиск" для фильтрации промтов
   - Выберите промт из выпадающего списка "Сохраненный промт"
   - Промт автоматически загрузится в поле ввода

3. **Просмотр результатов:**
   - После отправки запроса результаты появятся в таблице
   - Каждая строка содержит:
     - Чекбокс для выбора
     - Название модели
     - Ответ модели или сообщение об ошибке

4. **Сохранение результатов:**
   - Отметьте нужные результаты чекбоксами
   - Нажмите "Сохранить выбранные"
   - Результаты будут сохранены в базу данных

5. **Экспорт результатов:**
   - Нажмите кнопку "Экспорт"
   - Выберите формат (Markdown или JSON)
   - Укажите путь для сохранения файла

## Структура базы данных

База данных SQLite (`chatlist.db`) содержит следующие таблицы:

- **prompts** — сохраненные промты (дата, текст, теги)
- **models** — конфигурация моделей нейросетей
- **results** — сохраненные результаты запросов
- **settings** — настройки приложения

Подробное описание схемы БД см. в файле `DATABASE.md`.

## Создание исполняемого файла

Для создания исполняемого `.exe` файла используйте PyInstaller:

### Вариант 1: Использовать скрипт сборки

```powershell
.\build.ps1
```

или

```powershell
.\build.bat
```

### Вариант 2: Ручная сборка

```powershell
pip install -r requirements.txt
pyinstaller --onefile --windowed --name "ChatList" main.py
```

После сборки исполняемый файл будет находиться в папке `dist\ChatList.exe`

**Примечание:** При создании `.exe` файла убедитесь, что файл `.env` находится в той же директории, что и исполняемый файл, или используйте абсолютный путь к `.env` в коде.

## Структура проекта

```
ChatList/
├── main.py                    # Главный модуль с интерфейсом
├── db.py                      # Модуль работы с базой данных
├── network.py                 # Модуль работы с API нейросетей
├── models.py                  # Менеджер моделей
├── model_settings_dialog.py   # Диалог управления моделями
├── requirements.txt           # Зависимости проекта
├── .env.example              # Пример файла с переменными окружения
├── .gitignore                # Игнорируемые файлы
├── PLAN.md                   # План реализации
├── DATABASE.md               # Описание схемы БД
├── PROJECT.md                # Спецификация проекта
└── README.md                 # Этот файл
```

## Поддерживаемые API

- **OpenAI** — GPT-3.5, GPT-4 и другие модели OpenAI
- **DeepSeek** — DeepSeek Chat и другие модели
- **Groq** — Mixtral, Llama и другие быстрые модели
- **OpenRouter** — Единый API для доступа к множеству моделей

## Устранение неполадок

### Ошибка "API ключ не найден"

Убедитесь, что:
1. Файл `.env` существует в корне проекта
2. В `.env` указаны правильные имена переменных
3. Значения переменных соответствуют вашим API-ключам

### Ошибка "Нет активных моделей"

1. Перейдите в `Настройки` → `Управление моделями`
2. Добавьте хотя бы одну модель
3. Убедитесь, что флаг "Активна" установлен

### Ошибки при запросах к API

- Проверьте правильность API-ключей
- Убедитесь, что у вас есть доступ к выбранным моделям
- Проверьте интернет-соединение
- Некоторые модели могут быть временно недоступны

## Лицензия

См. файл `LICENSE`.

## Автор

rbait31

## Вклад в проект

Приветствуются pull requests! Для больших изменений сначала откройте issue, чтобы обсудить, что вы хотите изменить.
